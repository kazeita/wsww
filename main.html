<!doctype html>
<html>
<head>
  <script src="main.js"></script>
<script>

 	function launchApp() {
	overwolf.windows.obtainDeclaredWindow("index",
    function(result){
        if (result.status == "success"){
            overwolf.windows.restore(result.window.id,
                function(result){}
             );
         }
     }
 );
 
	}
	
	
	
/* Launch the app when the launcher terminates. Didn't work in-game
overwolf.games.launchers.onTerminated.addListener(
function (res) {
  console.log("onTerminated fired"); 
  overwolf.windows.obtainDeclaredWindow("index",
    function(result){
        if (result.status == "success"){
            overwolf.windows.restore(result.window.id,
                function(result){}
             );
         }
     }
 );
});
*/



/* Show/Hide app hotkey, didn't work
 function Show_Hide () {
overwolf.settings.registerHotKey(
    "Show_Hide",  function(arg) {
      isWindowVisibleToUser(function(isVisible) {
		  console.log("Show/Hide running...");
   				 if (arg.status === "success") {
        				if (isVisible.visible === "fully" || isVisible.visible === "partial")
							{
		   						 hide(index, hidden);
						}
						if (isVisible.visible === "hidden")
						{
								restore(index, restored);
              }
          } 
		  hide(index, hidden);
      }
   );
    }
  );
  
}
*/

// Show_Hide window simple version. Didn't work
function Show_Hide () {
	overwolf.settings.registerHotKey(
    "Show_Hide",  function(arg) {
		console.log("Show/Hide running...");
		if (arg.status == "success") {
			overwolf.windows.hide(index);
		}
	});
}

  
  overwolf.games.onGameInfoUpdated.addListener(function (res) {
//  if (gameLaunched(res)) 
{
    registerEvents();
    setTimeout(setFeatures, 1000);
	if (res.gameInfo.isRunning) { //tried matchStart, didn't work. Switched to isRunning
 	console.log("isRunning fired");
 	launchApp();
}
	
  }
  console.log("onGameInfoUpdated: " + JSON.stringify(res));
 // launchApp(); //this worked by calling the app whenever game info was updated. But it shows up too many times and when the game ends, it covers up the launcher.
});

/* Tried matchStart. didn't work. Switched to isRunning
overwolf.games.events.onInfoUpdates2.addListener(function(data) {
	console.log("Listener running");
 if (data.info.game_info.matchStarted) {
 // do something interesting with the value (summoner name)
// if (data.info.gameInfo.isRunning) {
// 	console.log("isRunning fired");
 launchApp();
}

});
*/
  
setFeatures();
Show_Hide();
launchApp();
</script>
<meta charset="utf-8">
<title>Main</title>
</head>

<body>
</body>
</html>
